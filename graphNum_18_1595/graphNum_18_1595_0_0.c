#include <stdio.h>
#include <stdint.h>
FILE * fout;
uint_fast32_t starthere = 0;
#define fopener fopen("graphNum_18_1595_0_1_out.txt", "w")
uint_fast64_t y;
uint_fast32_t best = 1;
uint_fast32_t i;
uint_fast32_t this;
static uint_fast32_t maxpos = 17;
static uint_fast32_t endhere = 0;
char str[28] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

static uint_fast64_t C[18][9] = {{18446744073709551615LLU,8639156683391500287LLU,18446744073709551480LLU,18446743800968302463LLU,2287826415973826623LLU,16420404891721924607LLU,17368086608099440892LLU,18446744022162095743LLU,983295LLU},{18446744073709551615LLU,17592186044415LLU,0LLU,18446744073692774400LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,16777215LLU,0LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,0LLU,18446744073709289472LLU,18446744073709551615LLU,1048575LLU},{18446448510420123616LLU,18446738222611382271LLU,18446744073709551615LLU,18307132480982876159LLU,15705168974324923965LLU,4269078074953298653LLU,18446673704965596879LLU,18446744073709551615LLU,1048575LLU},{18375809081043566623LLU,17293840144108879079LLU,18443366365415866367LLU,18446735281911234556LLU,18428729675199672831LLU,18446744073304907763LLU,70368744177660LLU,18446744073709551104LLU,1048575LLU},{15060037136627548159LLU,1152921504522761183LLU,18158504910054752000LLU,18446744073709547315LLU,18446744073709551615LLU,18441676560430759855LLU,18446744073709551615LLU,18446744004990075391LLU,1048575LLU},{18446744073709551615LLU,18446741702345752383LLU,18446744073692774655LLU,9362992421390480639LLU,16681262646808281071LLU,18230352488664399871LLU,18446744073709526835LLU,17293822637822181375LLU,1048575LLU},{18302628748196741119LLU,11529214839910033343LLU,18446182171728134399LLU,4442026874503143LLU,18444492273895866304LLU,18446744070471548447LLU,18446739662237597455LLU,862437193774252543LLU,1048572LLU},{13831117543047167771LLU,18302505740323741303LLU,17798788677201575935LLU,18446744073709548254LLU,18446744073709551615LLU,18446470256491614715LLU,18444562453565014015LLU,18410365631992954845LLU,1048323LLU},{0LLU,18446726481523507200LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{0LLU,18302628885633695742LLU,18446744073709551615LLU,18446742974197923776LLU,18438836386082586617LLU,18446744073709486081LLU,14987557280851951615LLU,6917529026676388856LLU,982999LLU},{18446744073709551615LLU,18441378456966004737LLU,13979173243342290938LLU,17563616308241629183LLU,18446743867140022271LLU,18446744073709551615LLU,18145002896561799167LLU,18437807243196792831LLU,913663LLU},{18446744073709551615LLU,18446744073709502719LLU,13835058055298940927LLU,18419718077395501055LLU,18086315366018973663LLU,9187307935338856447LLU,9222246134800707551LLU,13835058048772595663LLU,917422LLU},{1152912158208557025LLU,18446744073709551614LLU,4611686018427387903LLU,11417750745357746176LLU,18446742395399175807LLU,18446744073709551615LLU,18410644910093893631LLU,17311836967611924479LLU,921599LLU},{9209861233811912951LLU,18411841172436676015LLU,17293760995507828991LLU,18446744073709436909LLU,18446744073709551615LLU,16149908261316312695LLU,72055936045285375LLU,10303672585153413119LLU,777727LLU},{17960299105716029439LLU,10412322338480586751LLU,18429362728683325415LLU,9223301942887841791LLU,18446464797755699648LLU,18446744073709551615LLU,18446744073707454463LLU,9223361591368466944LLU,524260LLU},{17858531737804994879LLU,18419616922829062143LLU,18392640679013120287LLU,18446744073709551615LLU,281474976710655LLU,18446744073709551615LLU,1150810442264739839LLU,11529161926047170559LLU,786207LLU}};

static uint_fast64_t D[18][9] = {{18446181123758227455LLU,18302628885633386303LLU,18374687579182727423LLU,18446682500957732551LLU,18444492273895866367LLU,18446742932271656991LLU,18446744009252012031LLU,2305772704625590237LLU,1048454LLU},{18445716775175383934LLU,18446726486038003707LLU,18446744073709551615LLU,16711975257778421759LLU,5603541846285236145LLU,12229080018491204317LLU,18446744073709367909LLU,18446744073709551615LLU,1048575LLU},{2192126929484619459LLU,16859770558314332166LLU,14122434097848491775LLU,18446744073709398656LLU,18446744073709551615LLU,16126817239748123939LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{16255644442759099837LLU,16091044809245982717LLU,13667208447054935506LLU,6573979669446524927LLU,18446459771410570623LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{17294948451829678079LLU,17592118935303LLU,18446744073692774400LLU,18446744073709551615LLU,18392630509436534767LLU,18442240473948037119LLU,10641161494546350079LLU,18437639256770701043LLU,1048575LLU},{16140606395247493119LLU,18446740569015203839LLU,18158506000976445439LLU,9227875636476902455LLU,16282764448465125375LLU,18446735293722654623LLU,18446721974432925455LLU,17557102745523256831LLU,1048575LLU},{18446739881016164351LLU,18446744012768411647LLU,18443366373989023743LLU,18442240474098137087LLU,18446744073709551615LLU,4341206157994490623LLU,18329577202188812272LLU,18192568733765992349LLU,1048575LLU},{18446744073707454464LLU,18446739399686224127LLU,18446742974214701055LLU,18446744073709547512LLU,16139766338431217725LLU,18157669271688183777LLU,7922771549960765183LLU,18446744054171409262LLU,1048575LLU},{13831680355561635611LLU,18445622554536181495LLU,17870283321286590329LLU,18446743800970462206LLU,2287826415975923711LLU,18437745670404825083LLU,18374721251659513852LLU,18410433750166929407LLU,1009275LLU},{18302628885633597439LLU,1722625823455707135LLU,18446744022169944062LLU,4503599624159103LLU,18446744073707454464LLU,16429130616008605695LLU,17437923462990526479LLU,17003340393136783487LLU,1022461LLU},{18446744073709551615LLU,3942690367530336255LLU,9103845602515675949LLU,13607533220194309503LLU,12843486529723296462LLU,8537590889179774974LLU,18446744073709473178LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,8639170722691809279LLU,13907115649303838584LLU,17410419147527050623LLU,12844054790027546575LLU,8537590889179774975LLU,18145002896561720730LLU,18437807243196792831LLU,913663LLU},{18446744073709551615LLU,13600800505914720255LLU,9175903196554128303LLU,13760729281397260224LLU,18438267919208807160LLU,18446744073709486080LLU,14987557280851951615LLU,6917529026676388856LLU,982999LLU},{562949953421311LLU,18446732337069031422LLU,18446744073709551615LLU,10372351551757877247LLU,8065927412529037307LLU,17142806296295051263LLU,15510115641687128949LLU,17302829733439469307LLU,921599LLU},{18446565924840074111LLU,18446744073709535235LLU,18446744073709551615LLU,17869960047807692799LLU,18311389656576407495LLU,18446744056529747967LLU,4317263192788041727LLU,13834960466006200263LLU,917422LLU},{18158447726859780095LLU,18446727581035134975LLU,18433233068668911585LLU,18446744073696968703LLU,18446462598734938111LLU,18446744073701160959LLU,18446691261709289471LLU,17865766527505530879LLU,489443LLU},{2305561534236983283LLU,18446744069414600703LLU,16429131440641277823LLU,18446744071561936959LLU,144115188075823103LLU,16140901081675726847LLU,18446741943154114559LLU,18319622877222731775LLU,773247LLU},{18410715173602975727LLU,17581472407409917950LLU,16140619585215782911LLU,18446744073692905471LLU,18446744073709551615LLU,2305843009213693951LLU,18401639905833517056LLU,17430055358319033919LLU,472061LLU}};

uint_fast8_t X[18] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

uint_fast64_t A[18][9] = {{18446181123758227455LLU,18302628885633386303LLU,18374687579182727423LLU,18446682500957732551LLU,18444492273895866367LLU,18446742932271656991LLU,18446744009252012031LLU,2305772704625590237LLU,1048454LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,1048575LLU}};

#if UINTPTR_MAX == 0xffffffffffffffff // 64-bit. Hopefully this means the cpu has 'popcnt'.
int counter (uint64_t * buf){
    uint64_t cnt[18];
    cnt[0] = 0;
    cnt[1] = 0;
    cnt[2] = 0;
    cnt[3] = 0;
    cnt[4] = 0;
    cnt[5] = 0;
    cnt[6] = 0;
    cnt[7] = 0;
    cnt[8] = 0;
    cnt[9] = 0;
    cnt[10] = 0;
    cnt[11] = 0;
    cnt[12] = 0;
    cnt[13] = 0;
    cnt[14] = 0;
    cnt[15] = 0;
    cnt[16] = 0;
    cnt[17] = 0;

    __asm__(
            "popcnt %4, %4 \n\t"
            "add %4, %0    \n\t"
            "popcnt %5, %5 \n\t"
            "add %5, %1    \n\t"
            "popcnt %6, %6 \n\t"
            "add %6, %2    \n\t"
            "popcnt %7, %7 \n\t"
            "add %7, %3    \n\t"
            : "+r" (cnt[0]), "+r" (cnt[1]), "+r" (cnt[2]), "+r" (cnt[3])
            : "r" (buf[0]), "r" (buf[1]), "r" (buf[2]), "r" (buf[3]));
    __asm__(
            "popcnt %4, %4 \n\t"
            "add %4, %0    \n\t"
            "popcnt %5, %5 \n\t"
            "add %5, %1    \n\t"
            "popcnt %6, %6 \n\t"
            "add %6, %2    \n\t"
            "popcnt %7, %7 \n\t"
            "add %7, %3    \n\t"
            : "+r" (cnt[4]), "+r" (cnt[5]), "+r" (cnt[6]), "+r" (cnt[7])
            : "r" (buf[4]), "r" (buf[5]), "r" (buf[6]), "r" (buf[7]));
    __asm__(
            "popcnt %4, %4 \n\t"
            "add %4, %0    \n\t"
            "popcnt %5, %5 \n\t"
            "add %5, %1    \n\t"
            "popcnt %6, %6 \n\t"
            "add %6, %2    \n\t"
            "popcnt %7, %7 \n\t"
            "add %7, %3    \n\t"
            : "+r" (cnt[8]), "+r" (cnt[9]), "+r" (cnt[10]), "+r" (cnt[11])
            : "r" (buf[8]), "r" (buf[9]), "r" (buf[10]), "r" (buf[11]));
    __asm__(
            "popcnt %4, %4 \n\t"
            "add %4, %0    \n\t"
            "popcnt %5, %5 \n\t"
            "add %5, %1    \n\t"
            "popcnt %6, %6 \n\t"
            "add %6, %2    \n\t"
            "popcnt %7, %7 \n\t"
            "add %7, %3    \n\t"
            : "+r" (cnt[12]), "+r" (cnt[13]), "+r" (cnt[14]), "+r" (cnt[15])
            : "r" (buf[12]), "r" (buf[13]), "r" (buf[14]), "r" (buf[15]));
    __asm__(
            "popcnt %2, %2  \n\t"
            "add %2, %0     \n\t"
            "popcnt %3, %3  \n\t"
            "add %3, %1     \n\t"
            : "+r" (cnt[16]), "+r" (cnt[17])
            : "r" (buf[16]), "r" (buf[17]));


    return cnt[0] + cnt[1] + cnt[2] + cnt[3] + cnt[4] + cnt[5] + cnt[6] + cnt[7] + cnt[8] + cnt[9] + cnt[10] + cnt[11] + cnt[12] + cnt[13] + cnt[14] + cnt[15] + cnt[16] + cnt[17];
}

#elif UINTPTR_MAX == 0xffffffff // 32-bit
int counter (unsigned long long i)
{
  unsigned int i1 = i, i2 = i >> 32;
  i1 = i1 - ((i1 >> 1) & 0x55555555);
  i2 = i2 - ((i2 >> 1) & 0x55555555);
  i1 = (i1 & 0x33333333) + ((i1 >> 2) & 0x33333333);
  i2 = (i2 & 0x33333333) + ((i2 >> 2) & 0x33333333);
  i1 = (i1 + (i1 >> 4)) & 0xF0F0F0F;
  i2 = (i2 + (i2 >> 4)) & 0xF0F0F0F;
  return ((i1 + i2) * 0x1010101) >> 24;
}

#else
#error "this cpu doesn't seem to be 32-bit or 64-bit. I don't know how to deal with this."
#endif
void f(uint_fast8_t i, uint_fast8_t y0){
    if(y0){
        A[i][0] = A[i-1][0] & C[i][0];
        A[i][1] = A[i-1][1] & C[i][1];
        A[i][2] = A[i-1][2] & C[i][2];
        A[i][3] = A[i-1][3] & C[i][3];
        A[i][4] = A[i-1][4] & C[i][4];
        A[i][5] = A[i-1][5] & C[i][5];
        A[i][6] = A[i-1][6] & C[i][6];
        A[i][7] = A[i-1][7] & C[i][7];
        A[i][8] = A[i-1][8] & C[i][8];

    } else {
        A[i][0] = A[i-1][0] & D[i][0];
        A[i][1] = A[i-1][1] & D[i][1];
        A[i][2] = A[i-1][2] & D[i][2];
        A[i][3] = A[i-1][3] & D[i][3];
        A[i][4] = A[i-1][4] & D[i][4];
        A[i][5] = A[i-1][5] & D[i][5];
        A[i][6] = A[i-1][6] & D[i][6];
        A[i][7] = A[i-1][7] & D[i][7];
        A[i][8] = A[i-1][8] & D[i][8];

    }
}

void printout(){
    sprintf(str, "[                  ,%5d]\n", this);
    str[1] = X[0] ^ 48;
    str[2] = X[1] ^ 48;
    str[3] = X[2] ^ 48;
    str[4] = X[3] ^ 48;
    str[5] = X[4] ^ 48;
    str[6] = X[5] ^ 48;
    str[7] = X[6] ^ 48;
    str[8] = X[7] ^ 48;
    str[9] = X[8] ^ 48;
    str[10] = X[9] ^ 48;
    str[11] = X[10] ^ 48;
    str[12] = X[11] ^ 48;
    str[13] = X[12] ^ 48;
    str[14] = X[13] ^ 48;
    str[15] = X[14] ^ 48;
    str[16] = X[15] ^ 48;
    str[17] = X[16] ^ 48;
    str[18] = X[17] ^ 48;

}


void checkifbest(){
    uint_fast64_t * thisbuf = A[maxpos];
    this = counter(thisbuf);

    if(this == best){
        printout();
        fwrite(str, 1, sizeof(str), fout);
    }

    if(this > best){
        printout();
        fwrite(str, 1, sizeof(str), fout);
        best = this;
    }

}

int r(){
    goto startnocarry;
    
    startnocarry:
        if(i == maxpos){
            if(X[i]){
                X[i] = 0;
                i--;
                goto startcarry;
            }else{
                f(i, 0);
                checkifbest();
                X[i] = 1;
                f(i, 1);
                checkifbest();
                X[i] = 0;
                i--;
                goto startcarry;
            }
        }else{
            f(i, X[i]);
            i++;
            goto startnocarry;
        }
        
    startcarry:
        if(X[i] && (i != endhere)){
            X[i] = 0;
            i--;
            goto startcarry;
        }else{
            if(i == endhere){
                goto end;
            }else{
                X[i] = 1;
                f(i, 1);
                i++;
                goto startnocarry;
            }
        }

    end:
        return 0;
}
int main(){
fout = fopener;
    fputs("[[0,3],[0,4],[0,6],[0,8],[1,4],[1,5],[1,6],[1,7],[2,5],[2,6],[2,7],[3,7],[3,8],[4,7],[4,8],[5,6],[5,8],[6,8]]\n", fout);
    if(endhere){
        uint_fast8_t bitpos = 0;
        uint_fast8_t thisbit;
        while(starthere){
            thisbit = starthere & 1;
            X[bitpos] = thisbit;
            f(bitpos, thisbit);
            bitpos++;
            starthere >>= 1;
        }
        i = endhere;
        r();
    }else{
        i = 0;
        r();
    }
    fwrite("FINISHED.", 1, 9, fout);
    fclose(fout);
    return 0;
}

