#include <stdio.h>
#include <stdint.h>
FILE * fout;
uint_fast32_t starthere = 0;
#define fopener fopen("graphNum_21_718_0_1_out.txt", "w")
uint_fast64_t y;
uint_fast32_t best = 1;
uint_fast32_t i;
uint_fast32_t this;
static uint_fast32_t maxpos = 20;
static uint_fast32_t endhere = 0;
char str[31] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

static uint_fast64_t C[21][6] = {{33554431LLU,18446743798831652864LLU,18446744073709551615LLU,18446744073709551615LLU,18445618173806903295LLU,4398046511103LLU},{18446744073709551615LLU,8191LLU,18446744073642442752LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,67108863LLU,18158513697557839872LLU,18446744073709551615LLU,4398046511103LLU},{18446744073675997184LLU,18446744073709551615LLU,15374714632883142655LLU,141816512812938743LLU,18446744073705357312LLU,4398046511103LLU},{0LLU,18446744073709543424LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073675997185LLU,274877906943LLU,18446744073642442752LLU,288230376151711743LLU,18446744073705357312LLU,4398046511103LLU},{18378046587206107135LLU,15564440312192434151LLU,66912225LLU,18446744073709550592LLU,1072053901652127LLU,4398046511103LLU},{18446737475633151999LLU,18392692631843893183LLU,18446744073699065855LLU,13835058055282164735LLU,18446110751726239731LLU,4398046494720LLU},{18444492273928580607LLU,9079256848711827455LLU,18446744073709526847LLU,18445688542545842175LLU,18446744004994269183LLU,4398042329592LLU},{2251799794810675LLU,18439935622899556352LLU,4611685949942267903LLU,18446744073709551612LLU,14402511677050322943LLU,4396976963583LLU},{18014046665761087489LLU,268007636988LLU,18446744073709551615LLU,288212852622229503LLU,18446744073709551360LLU,4381726473315LLU},{18446743242599833599LLU,18446743970628664063LLU,17298322045494362112LLU,18446744073709551615LLU,17406412559782772991LLU,4140347637759LLU},{18433233274810662851LLU,15563323208378613751LLU,18445618173819418617LLU,4395512192623968255LLU,18303736987193883806LLU,4119305650175LLU},{17238635745116159999LLU,18446744039349321327LLU,1125899906711527LLU,18433022167789538304LLU,143936203433833471LLU,3762391105535LLU},{18446741874484719615LLU,4593107020697042943LLU,18378344829724651551LLU,17582052928074547455LLU,18446744072621625210LLU,3246992768896LLU},{9295319661744750591LLU,18410708677599162303LLU,4611633237842722815LLU,14699749200917168079LLU,18446103047508590583LLU,2193591615615LLU},{18430981612452151247LLU,18445688542480302071LLU,18445618242522169211LLU,9222526787289939967LLU,18311618218361355774LLU,4119943444473LLU},{9223369837629996919LLU,18442203917468033024LLU,18392700813756592383LLU,17870283304227307516LLU,16133028560154632191LLU,3245988642695LLU},{18122484771689848895LLU,1125895343046653LLU,1152921504606715879LLU,18446727580984753152LLU,1152920954448245505LLU,3835262991599LLU},{9799832234537254911LLU,18410708678009094143LLU,17365876861317419007LLU,14699766775923343359LLU,17564031949637451767LLU,1992813921279LLU},{18399464944866157007LLU,71002062811955199LLU,18445622571849220075LLU,9223358018080685059LLU,4503598875348563214LLU,4381937040891LLU}};

static uint_fast64_t D[21][6] = {{18446744073709551615LLU,10824877243164000255LLU,13838699912442209985LLU,68609581143552243LLU,18446744073705357312LLU,4398046511103LLU},{5623669732503715838LLU,18446744073709546791LLU,10761814662082199551LLU,18277460349989594534LLU,18446744073709551615LLU,4398046511103LLU},{12823074341205835777LLU,7621866830545564376LLU,18446744073670170942LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446743798831652863LLU,9220944132107665407LLU,18401004352947183453LLU,18445618173806903295LLU,4398046511103LLU},{18446744073709551615LLU,10824877243163992063LLU,7684929411666732737LLU,18327797421277796953LLU,18446744073709551615LLU,4398046511103LLU},{5623669732503715839LLU,18446744073709546791LLU,4608044161306722303LLU,18378134492565999372LLU,18445618173806903295LLU,4398046511103LLU},{12825892197395082493LLU,9016197769678792604LLU,18446744073693796671LLU,14123288431433875455LLU,18446110751726239731LLU,4398046494720LLU},{18375222132940460803LLU,14116057931193547491LLU,18446744073675243488LLU,18446744073709551615LLU,1072053901652127LLU,4398046511103LLU},{18446744073690677043LLU,15556491942635241471LLU,234187111919580917LLU,10733200294088278012LLU,14403637508235106973LLU,4396976963583LLU},{18446744073708711423LLU,4340833973308489727LLU,18216198750464872203LLU,7781097829601116403LLU,18446744073707939170LLU,4398042329592LLU},{14964317099399315455LLU,18446743970628663399LLU,17294944084921679871LLU,18378134544109588479LLU,17405930590795988991LLU,4140347637759LLU},{8673398467789324287LLU,18446744066839277500LLU,4611422121946513407LLU,18446726498636480268LLU,18446100142797881343LLU,4381726473315LLU},{16429131303237627135LLU,9016206397355343389LLU,18446744073706397119LLU,18433022167789539327LLU,18446530767920562163LLU,3762391099598LLU},{13690583326878171073LLU,18445618307858950142LLU,18446744073646617471LLU,72056550348292095LLU,18446181120531742718LLU,4119305639729LLU},{9225491315432618923LLU,17579642813672128511LLU,4611633237808414719LLU,18446744073709551567LLU,11762267586392031199LLU,2193591631871LLU},{18445054878104160087LLU,1147538183973731043LLU,18378344829735137280LLU,18446744073709550847LLU,6685540835913596990LLU,3246992769023LLU},{16429131440641211967LLU,18375806825380445725LLU,234187180619201783LLU,15547548513997946876LLU,14411305502328871921LLU,3761963527887LLU},{18446611552491796975LLU,17329638060852051967LLU,18230502022362959851LLU,8069328205753876419LLU,13492784470582654407LLU,2193652871679LLU},{11524702787090087935LLU,18446743866473701879LLU,18446739689558750079LLU,18175683655030865919LLU,18414352388632592383LLU,3950798690237LLU},{9176222676086155095LLU,1147538280594276320LLU,18445688529661984767LLU,18446744073642654780LLU,6843157321057566526LLU,3287593910243LLU},{9799832788455456767LLU,18446738316842754079LLU,17528009694898286847LLU,15277335818834804735LLU,17864717593500426239LLU,4139492822943LLU}};

uint_fast8_t X[21] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

uint_fast64_t A[21][6] = {{18446744073709551615LLU,10824877243164000255LLU,13838699912442209985LLU,68609581143552243LLU,18446744073705357312LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU},{18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,18446744073709551615LLU,4398046511103LLU}};

#if UINTPTR_MAX == 0xffffffffffffffff // 64-bit. Hopefully this means the cpu has 'popcnt'.
int counter (uint64_t * buf){
    uint64_t cnt[21];
    cnt[0] = 0;
    cnt[1] = 0;
    cnt[2] = 0;
    cnt[3] = 0;
    cnt[4] = 0;
    cnt[5] = 0;
    cnt[6] = 0;
    cnt[7] = 0;
    cnt[8] = 0;
    cnt[9] = 0;
    cnt[10] = 0;
    cnt[11] = 0;
    cnt[12] = 0;
    cnt[13] = 0;
    cnt[14] = 0;
    cnt[15] = 0;
    cnt[16] = 0;
    cnt[17] = 0;
    cnt[18] = 0;
    cnt[19] = 0;
    cnt[20] = 0;

    __asm__(
            "popcnt %4, %4 \n\t"
            "add %4, %0    \n\t"
            "popcnt %5, %5 \n\t"
            "add %5, %1    \n\t"
            "popcnt %6, %6 \n\t"
            "add %6, %2    \n\t"
            "popcnt %7, %7 \n\t"
            "add %7, %3    \n\t"
            : "+r" (cnt[0]), "+r" (cnt[1]), "+r" (cnt[2]), "+r" (cnt[3])
            : "r" (buf[0]), "r" (buf[1]), "r" (buf[2]), "r" (buf[3]));
    __asm__(
            "popcnt %4, %4 \n\t"
            "add %4, %0    \n\t"
            "popcnt %5, %5 \n\t"
            "add %5, %1    \n\t"
            "popcnt %6, %6 \n\t"
            "add %6, %2    \n\t"
            "popcnt %7, %7 \n\t"
            "add %7, %3    \n\t"
            : "+r" (cnt[4]), "+r" (cnt[5]), "+r" (cnt[6]), "+r" (cnt[7])
            : "r" (buf[4]), "r" (buf[5]), "r" (buf[6]), "r" (buf[7]));
    __asm__(
            "popcnt %4, %4 \n\t"
            "add %4, %0    \n\t"
            "popcnt %5, %5 \n\t"
            "add %5, %1    \n\t"
            "popcnt %6, %6 \n\t"
            "add %6, %2    \n\t"
            "popcnt %7, %7 \n\t"
            "add %7, %3    \n\t"
            : "+r" (cnt[8]), "+r" (cnt[9]), "+r" (cnt[10]), "+r" (cnt[11])
            : "r" (buf[8]), "r" (buf[9]), "r" (buf[10]), "r" (buf[11]));
    __asm__(
            "popcnt %4, %4 \n\t"
            "add %4, %0    \n\t"
            "popcnt %5, %5 \n\t"
            "add %5, %1    \n\t"
            "popcnt %6, %6 \n\t"
            "add %6, %2    \n\t"
            "popcnt %7, %7 \n\t"
            "add %7, %3    \n\t"
            : "+r" (cnt[12]), "+r" (cnt[13]), "+r" (cnt[14]), "+r" (cnt[15])
            : "r" (buf[12]), "r" (buf[13]), "r" (buf[14]), "r" (buf[15]));
    __asm__(
            "popcnt %4, %4 \n\t"
            "add %4, %0    \n\t"
            "popcnt %5, %5 \n\t"
            "add %5, %1    \n\t"
            "popcnt %6, %6 \n\t"
            "add %6, %2    \n\t"
            "popcnt %7, %7 \n\t"
            "add %7, %3    \n\t"
            : "+r" (cnt[16]), "+r" (cnt[17]), "+r" (cnt[18]), "+r" (cnt[19])
            : "r" (buf[16]), "r" (buf[17]), "r" (buf[18]), "r" (buf[19]));
    __asm__(
           "popcnt %1, %1  \n\t"
           "add %1, %0     \n\t"
            : "+r" (cnt[20])
            : "r" (buf[20]));


    return cnt[0] + cnt[1] + cnt[2] + cnt[3] + cnt[4] + cnt[5] + cnt[6] + cnt[7] + cnt[8] + cnt[9] + cnt[10] + cnt[11] + cnt[12] + cnt[13] + cnt[14] + cnt[15] + cnt[16] + cnt[17] + cnt[18] + cnt[19] + cnt[20];
}

#elif UINTPTR_MAX == 0xffffffff // 32-bit
int counter (unsigned long long i)
{
  unsigned int i1 = i, i2 = i >> 32;
  i1 = i1 - ((i1 >> 1) & 0x55555555);
  i2 = i2 - ((i2 >> 1) & 0x55555555);
  i1 = (i1 & 0x33333333) + ((i1 >> 2) & 0x33333333);
  i2 = (i2 & 0x33333333) + ((i2 >> 2) & 0x33333333);
  i1 = (i1 + (i1 >> 4)) & 0xF0F0F0F;
  i2 = (i2 + (i2 >> 4)) & 0xF0F0F0F;
  return ((i1 + i2) * 0x1010101) >> 24;
}

#else
#error "this cpu doesn't seem to be 32-bit or 64-bit. I don't know how to deal with this."
#endif
void f(uint_fast8_t i, uint_fast8_t y0){
    if(y0){
        A[i][0] = A[i-1][0] & C[i][0];
        A[i][1] = A[i-1][1] & C[i][1];
        A[i][2] = A[i-1][2] & C[i][2];
        A[i][3] = A[i-1][3] & C[i][3];
        A[i][4] = A[i-1][4] & C[i][4];
        A[i][5] = A[i-1][5] & C[i][5];

    } else {
        A[i][0] = A[i-1][0] & D[i][0];
        A[i][1] = A[i-1][1] & D[i][1];
        A[i][2] = A[i-1][2] & D[i][2];
        A[i][3] = A[i-1][3] & D[i][3];
        A[i][4] = A[i-1][4] & D[i][4];
        A[i][5] = A[i-1][5] & D[i][5];

    }
}

void printout(){
    sprintf(str, "[                     ,%5d]\n", this);
    str[1] = X[0] ^ 48;
    str[2] = X[1] ^ 48;
    str[3] = X[2] ^ 48;
    str[4] = X[3] ^ 48;
    str[5] = X[4] ^ 48;
    str[6] = X[5] ^ 48;
    str[7] = X[6] ^ 48;
    str[8] = X[7] ^ 48;
    str[9] = X[8] ^ 48;
    str[10] = X[9] ^ 48;
    str[11] = X[10] ^ 48;
    str[12] = X[11] ^ 48;
    str[13] = X[12] ^ 48;
    str[14] = X[13] ^ 48;
    str[15] = X[14] ^ 48;
    str[16] = X[15] ^ 48;
    str[17] = X[16] ^ 48;
    str[18] = X[17] ^ 48;
    str[19] = X[18] ^ 48;
    str[20] = X[19] ^ 48;
    str[21] = X[20] ^ 48;

}


void checkifbest(){
    uint_fast64_t * thisbuf = A[maxpos];
    this = counter(thisbuf);

    if(this == best){
        printout();
        fwrite(str, 1, sizeof(str), fout);
    }

    if(this > best){
        printout();
        fwrite(str, 1, sizeof(str), fout);
        best = this;
    }

}

int r(){
    goto startnocarry;
    
    startnocarry:
        if(i == maxpos){
            if(X[i]){
                X[i] = 0;
                i--;
                goto startcarry;
            }else{
                f(i, 0);
                checkifbest();
                X[i] = 1;
                f(i, 1);
                checkifbest();
                X[i] = 0;
                i--;
                goto startcarry;
            }
        }else{
            f(i, X[i]);
            i++;
            goto startnocarry;
        }
        
    startcarry:
        if(X[i] && (i != endhere)){
            X[i] = 0;
            i--;
            goto startcarry;
        }else{
            if(i == endhere){
                goto end;
            }else{
                X[i] = 1;
                f(i, 1);
                i++;
                goto startnocarry;
            }
        }

    end:
        return 0;
}
int main(){
fout = fopener;
    fputs("[[0,1],[0,2],[0,3],[1,2],[1,4],[2,5],[3,6],[3,7],[4,8],[4,9],[5,10],[5,11],[6,8],[6,10],[7,9],[7,11],[8,12],[9,13],[10,12],[11,13],[12,13]]\n", fout);
    if(endhere){
        uint_fast8_t bitpos = 0;
        uint_fast8_t thisbit;
        while(starthere){
            thisbit = starthere & 1;
            X[bitpos] = thisbit;
            f(bitpos, thisbit);
            bitpos++;
            starthere >>= 1;
        }
        i = endhere;
        r();
    }else{
        i = 0;
        r();
    }
    fwrite("FINISHED.", 1, 9, fout);
    fclose(fout);
    return 0;
}

